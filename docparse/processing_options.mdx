---
title: 'Processing Options'
description: 'Learn about the parameters you can use with Aryn DocParse'
icon: 'map'
---

There are several options you can specify when calling DocParse. For example, we can extract the table structure from our document with the following curl command.

```bash
export ARYN_API_KEY="PUT API KEY HERE"
    curl -s -N -D headers "https://api.aryn.cloud/v1/document/partition" -H "Authorization: Bearer $ARYN_API_KEY" -F "file=@document.pdf" -F 'options={"extract_table_structure": true}' | tee document.json
```

All of the available options are listed below:

* `threshold`: This represents the threshold for accepting the model's predicted bounding boxes. It defaults to `auto`, where the service uses a processing method to find the best prediction for each possible bounding box. This is the recommended setting. However, you can override this by specifying a numerical threshold between 0 and 1. If you specify a numerical threshold, only bounding boxes with confidence scores higher than the threshold will be returned (instead of using the processing method described above). A lower value will include more objects, but may have overlaps, while a higher value will reduce the number of overlaps, but may miss legitimate objects. If you do set the threshold manually, we recommend starting with a value of 0.32.
* `use_ocr`: It defaults to `false`, where the partitioner attempts to directly extract the text from the underlying PDF using PDFMiner.  If `true`, the partitioner detects and extracts text from images using OCR. This is useful when the text is not directly extractable from the PDF, such as when the text is part of an image or when the text is rotated.
* `extract_table_structure`: If `true`, the partitioner runs a table extraction model separate from the segmentation model in order to extract cells from regions of the document identified as tables.
* `extract_images`: If `true`, the partitioner crops each region identified as an image and attaches it to the associated `ImageElement`. This can later be fed into the `SummarizeImages` transform when used within Sycamore.
* `selected_pages`: You can specify a page (like `[11]` ), a page range (like `[[25,30]]` ), or a combination of both (like ``[11, [25,30]]`` ) of your PDF to process. The first page of the PDF is `1`, not `0`.
* `pages_per_call`: This is only available when using the Partition function in Sycamore. This option divides the processing of your document into batches of pages, and you specify the size of each batch (number of pages). This is useful when running OCR on large documents. 
* `chunking_options`: A tree of options for specifying chunking behavior. Chunking is only performed when this option is present, and the default options are chosen when chunking_options is specified as just `{}`. The full options are available in the [OpenAPI spec](../api-reference/endpoint/partition).
    * `merging_strategy`: Strategy to use to combine and split chunks. Valid values are 'header_augmenter', 'greedy_text_element', and 'marked'. The default and recommended merger is 'header_augmenter'.
        * Behavior of `header_augmenter`:
        Combines adjacent `Section-header` and `Title` elements into a new `Section-header` element. Merges elements into a chunk with its most recent `Section-header`. If the chunk would contain too many tokens, then it starts a new chunk copying the Section-header to the start of this new chunk and continues. Merges elements on different pages, unless `merge_across_pages` is set to `false`.
        * Behavior of `marked` merger:
        For each page, it detects whether the elements are present in two columns and if so, it orders them properly with the left column appearing in the order first. Then, it drops elements that are only one token in size. It also drops elements in the top and bottom 5% of the page. Elements returned do not have a `type`. The `marked` merger always breaks across pages.
        * Behavior of `greedy_text_element` merger:
        Merges elements into the last most recently merged set of elements unless doing so would make its token count exceed `max_tokens`. In that case, it would keep the new element separate and start merging subsequent elements into that one, following the same rule. Merges elements on different pages, unless `merge_across_pages` is set to `False`.
    * `max_tokens`: An integer specifying cutoff for splitting chunks that are too large. Default value is 512.
    * `tokenizer`: Valid values are 'openai_tokenizer', 'character_tokenizer', and 'huggingface_tokenizer'. The tokenizer for determining how characters in a chunk are grouped. Defaults to openai_tokenizer.
    * `tokenizer_options`: A tree specifying the options for the chosen tokenizer. Defaults to 'model_name': 'text-embedding-3-small', which works with the OpenAI tokenizer.
        * Available options for `openai_tokenizer`:
            * `model_name`: Accepts all models supported by OpenAI's [tiktoken tokenizer](https://github.com/openai/tiktoken). Default is "text-embedding-3-small"
        * Available options for `HuggingFaceTokenizer`:
            * `model_name`: Accepts all huggingface tokenizers from the [huggingface/tokenizers repo](https://github.com/huggingface/tokenizers)
        * `character_tokenizer` does not take any options.
    * `merge_across_pages`: Boolean. Whether the chunker should attempt to merge chunks on different pages. Defaults to `true`.
* `output_format`:  Defaults to `json` which yields an array called `elements` which contains the partitioned elements, represented in JSON.  If set to `markdown` the service response will instead include a field called `markdown` that contains a string representing the entire document in Markdown format.

Here is an example of how you can use some of these options in a curl command or in Python code with the [Aryn SDK](./aryn_sdk).

<CodeGroup>

```bash curl
export ARYN_API_KEY="PUT API KEY HERE"
curl -s -N -D headers "https://api.aryn.cloud/v1/document/partition" -H "Authorization: Bearer $ARYN_API_KEY" -F "file=@document.pdf" -F 'options={"use_ocr": true, "extract_table_structure": true, "threshold": 0.2}' | tee document.json
```

```python aryn_sdk.py
import os
import json
from aryn_sdk.partition import partition_file
os.environ["ARYN_API_KEY"] = "PUT API KEY HERE"
with open("document.pdf", "rb") as f:
    ans = partition_file(
        file=f,
        use_ocr=True,
        extract_table_structure=True,
        threshold=0.2
    )
with open("document.json", "w") as f:
    json.dump(ans, f)
```
</CodeGroup>
